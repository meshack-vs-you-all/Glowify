<div class="hero-section" id="shopify-section-{{ section.id }}" style="margin: 0; padding: 0;">
  {%- if section.blocks.size > 0 -%}
    <div class="hero-slider" 
         data-hero-slider
         data-autoplay="{{ section.settings.autoplay_enabled | default: true }}"
         data-autoplay-delay="{{ section.settings.autoplay_delay | default: 5000 }}"
         data-pause-on-hover="{{ section.settings.pause_on_hover | default: true }}">
      {%- for block in section.blocks -%}
        <div class="hero-slide" {{ block.shopify_attributes }}>
          <div class="hero-slide__container">
            <div class="hero-slide__image">
              {%- if block.settings.desktop_hero != blank or block.settings.tablet_hero != blank or block.settings.mobile_hero != blank or block.settings.image != blank -%}
                <picture>
                  {%- if block.settings.mobile_hero != blank -%}
                    <source media="(max-width: 767px)" srcset="{{ block.settings.mobile_hero | image_url: width: 768 }} 1x, {{ block.settings.mobile_hero | image_url: width: 1536 }} 2x">
                  {%- elsif block.settings.image != blank -%}
                    <source media="(max-width: 767px)" srcset="{{ block.settings.image | image_url: width: 768 }} 1x, {{ block.settings.image | image_url: width: 1536 }} 2x">
                  {%- endif -%}
                  {%- if block.settings.tablet_hero != blank -%}
                    <source media="(min-width: 768px) and (max-width: 1023px)" srcset="{{ block.settings.tablet_hero | image_url: width: 1024 }} 1x, {{ block.settings.tablet_hero | image_url: width: 2048 }} 2x">
                  {%- elsif block.settings.image != blank -%}
                    <source media="(min-width: 768px) and (max-width: 1023px)" srcset="{{ block.settings.image | image_url: width: 1024 }} 1x, {{ block.settings.image | image_url: width: 2048 }} 2x">
                  {%- endif -%}
                  {%- if block.settings.desktop_hero != blank -%}
                    <img 
                      src="{{ block.settings.desktop_hero | image_url: width: 1920 }}"
                      srcset="{{ block.settings.desktop_hero | image_url: width: 1920 }} 1x, {{ block.settings.desktop_hero | image_url: width: 3840 }} 2x"
                      alt="{% if block.settings.title != blank %}{{ block.settings.title | escape }}{% else %}{{ 'general.accessibility.hero_image' | t }}{% endif %}"
                      loading="eager"
                      width="1920"
                      height="1080"
                      style="width: 100%; height: 100%; object-fit: cover; object-position: center center; display: block;"
                    >
                  {%- elsif block.settings.image != blank -%}
                    <img 
                      src="{{ block.settings.image | image_url: width: 1920 }}"
                      srcset="{{ block.settings.image | image_url: width: 1920 }} 1x, {{ block.settings.image | image_url: width: 3840 }} 2x"
                      alt="{% if block.settings.title != blank %}{{ block.settings.title | escape }}{% else %}{{ 'general.accessibility.hero_image' | t }}{% endif %}"
                      loading="eager"
                      width="1920"
                      height="1080"
                      style="width: 100%; height: 100%; object-fit: cover; object-position: center center; display: block;"
                    >
                  {%- endif -%}
                </picture>
              {%- else -%}
                <div class="hero-slide__placeholder">
                  {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg' }}
                </div>
              {%- endif -%}
              <div class="hero-slide__overlay"></div>
            </div>
            <div class="hero-slide__content">
              <div class="hero-slide__text">
                {%- if block.settings.subtitle != blank -%}
                  <p class="hero-slide__subtitle">{{ block.settings.subtitle }}</p>
                {%- endif -%}
                {%- if block.settings.title != blank -%}
                  <h1 class="hero-slide__title">{{ block.settings.title }}</h1>
                {%- endif -%}
                {%- if block.settings.text != blank -%}
                  <p class="hero-slide__description">{{ block.settings.text }}</p>
                {%- endif -%}
                {%- if block.settings.button_label != blank and block.settings.button_link != blank -%}
                  <a href="{{ block.settings.button_link }}" class="button button--primary button--large hero-slide__button">
                    {{ block.settings.button_label }}
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                  </a>
                {%- endif -%}
              </div>
            </div>
          </div>
        </div>
      {%- endfor -%}
    </div>
    
    {%- if section.blocks.size > 1 -%}
      <div class="hero-dots">
        {%- for block in section.blocks -%}
          <button 
            class="hero-dot {% if forloop.first %}hero-dot--active{% endif %}" 
            data-slide-index="{{ forloop.index0 }}"
            aria-label="{{ 'general.accessibility.slide' | t }} {{ forloop.index }}"
          ></button>
        {%- endfor -%}
      </div>
    {%- endif -%}
  {%- else -%}
    {%- comment -%} Default hero when no blocks configured {%- endcomment -%}
    <div class="hero-slider" data-hero-slider>
      <div class="hero-slide">
        <div class="hero-slide__container">
          <div class="hero-slide__image">
            <div class="hero-slide__placeholder">
              {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg' }}
            </div>
            <div class="hero-slide__overlay"></div>
          </div>
          <div class="hero-slide__content">
            <div class="hero-slide__text">
              <h1 class="hero-slide__title">Where Little Moments Become Big Memories</h1>
              <p class="hero-slide__description">Thoughtfully designed baby products that bring comfort, style, and peace of mind.</p>
              <a href="{{ routes.all_products_collection_url }}" class="button button--primary button--large hero-slide__button">
                Discover Baby Essentials
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  {%- endif -%}
</div>

<style>
  .hero-section {
    position: relative;
    margin: 0 !important;
    padding: 0 !important;
    overflow: hidden;
  }

  /* Override .section class padding if applied */
  #shopify-section-{{ section.id }}.section,
  #shopify-section-{{ section.id }} {
    margin-top: 0 !important;
    margin-bottom: 0 !important;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
  }

  .hero-slider {
    margin: 0;
    padding: 0;
  }

  .hero-slide {
    margin: 0;
    padding: 0;
  }

  .hero-slide__container {
    margin: 0;
    padding: 0;
  }

  .hero-slide__image {
    margin: 0;
    padding: 0;
    display: block;
  }

  .hero-slider {
    position: relative;
  }

  .hero-slide {
    position: relative;
    min-height: 500px;
    width: 100%;
    margin: 0;
    padding: 0;
  }

  .hero-slide__container {
    display: grid;
    grid-template-columns: 1fr;
    min-height: 500px;
    position: relative;
  }

  @media (min-width: 1024px) {
    .hero-slide__container {
      grid-template-columns: 1fr 1fr;
      min-height: 600px;
    }
    
    .hero-slide__image {
      min-height: 600px;
    }
    
    .hero-slide__image picture,
    .hero-slide__image img {
      min-height: 600px;
    }
  }

  .hero-slide__image {
    position: relative;
    width: 100%;
    height: 100%;
    min-height: 500px;
    overflow: hidden;
    margin: 0;
    padding: 0;
  }

  .hero-slide__image picture {
    display: block;
    width: 100% !important;
    height: 100% !important;
    min-height: 500px;
    margin: 0 !important;
    padding: 0 !important;
    line-height: 0;
  }

  .hero-slide__image img {
    width: 100% !important;
    height: 100% !important;
    min-height: 500px;
    object-fit: cover !important;
    object-position: center center !important;
    display: block;
    margin: 0 !important;
    padding: 0 !important;
    border: none;
    vertical-align: top;
  }

  .hero-slide__placeholder {
    width: 100%;
    height: 100%;
    min-height: 500px;
    background: var(--color-light-gray);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0;
    padding: 0;
  }

  .hero-slide__overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(to bottom, rgba(26, 26, 26, 0.3), rgba(26, 26, 26, 0.6));
  }

  .hero-slide__content {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--space-4xl) var(--space-md);
    background: var(--color-off-white);
    position: relative;
  }

  @media (min-width: 1024px) {
    .hero-slide__content {
      padding: var(--space-5xl);
    }
  }

  .hero-slide__text {
    max-width: 600px;
    text-align: center;
  }

  @media (min-width: 1024px) {
    .hero-slide__text {
      text-align: left;
    }
  }

  @media (max-width: 767px) {
    .hero-slide__text {
      text-align: center;
    }
  }

  .hero-slide__subtitle {
    font-size: var(--font-size-small);
    letter-spacing: var(--letter-spacing-nav);
    text-transform: uppercase;
    color: var(--color-text-secondary);
    margin-bottom: var(--space-md);
  }

  .hero-slide__title {
    font-family: var(--font-display-family);
    font-size: var(--font-size-h1-mobile);
    line-height: var(--line-height-h1-mobile);
    font-weight: var(--font-weight-bold);
    letter-spacing: var(--letter-spacing-heading);
    margin-bottom: var(--space-lg);
    color: var(--color-text-primary);
  }

  @media (min-width: 768px) {
    .hero-slide__title {
      font-size: var(--font-size-h1-desktop);
      line-height: var(--line-height-h1-desktop);
    }
  }

  .hero-slide__description {
    font-family: var(--font-body-family);
    font-size: var(--font-size-body-large);
    line-height: var(--line-height-body-large);
    font-weight: var(--font-weight-regular);
    color: var(--color-text-secondary);
    margin-bottom: var(--space-2xl);
  }

  .hero-slide__button {
    display: inline-flex;
    align-items: center;
    gap: var(--space-sm);
  }

  .hero-dots {
    position: absolute;
    bottom: var(--space-xl);
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: var(--space-sm);
    z-index: 10;
  }

  .hero-dot {
    width: 12px;
    height: 12px;
    border-radius: var(--radius-full);
    border: 2px solid var(--color-white);
    background: transparent;
    cursor: pointer;
    transition: all var(--duration-fast) var(--ease-in-out);
    padding: 0;
  }

  .hero-dot--active,
  .hero-dot:hover {
    background: var(--color-white);
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const slider = document.querySelector('[data-hero-slider]');
    const dots = document.querySelectorAll('.hero-dot');
    let currentSlide = 0;
    let slideInterval;
    
    // Get settings from data attributes
    const autoplayEnabled = slider?.dataset.autoplay !== 'false';
    const autoplayDelay = parseInt(slider?.dataset.autoplayDelay || '5000', 10);
    const pauseOnHover = slider?.dataset.pauseOnHover === 'true';

    if (!slider || dots.length === 0) return;

    const slides = slider.querySelectorAll('.hero-slide');
    if (slides.length <= 1) return;

    function showSlide(index) {
      slides.forEach((slide, i) => {
        slide.style.display = i === index ? 'block' : 'none';
        slide.style.opacity = i === index ? '1' : '0';
      });
      
      dots.forEach((dot, i) => {
        dot.classList.toggle('hero-dot--active', i === index);
      });
      
      currentSlide = index;
    }

    dots.forEach((dot, index) => {
      dot.addEventListener('click', () => {
        showSlide(index);
        resetInterval();
      });
    });

    function nextSlide() {
      currentSlide = (currentSlide + 1) % slides.length;
      showSlide(currentSlide);
    }

    function resetInterval() {
      clearInterval(slideInterval);
      if (autoplayEnabled) {
        slideInterval = setInterval(nextSlide, autoplayDelay);
      }
    }

    // Initialize
    showSlide(0);
    resetInterval();
    
    // Pause on hover if enabled
    if (pauseOnHover) {
      slider.addEventListener('mouseenter', () => clearInterval(slideInterval));
      slider.addEventListener('mouseleave', resetInterval);
    }
  });
</script>

{% schema %}
{
  "name": "Hero",
  "tag": "section",
  "settings": [
    {
      "type": "checkbox",
      "id": "autoplay_enabled",
      "label": "Enable autoplay",
      "default": true,
      "info": "Automatically advance slides"
    },
    {
      "type": "range",
      "id": "autoplay_delay",
      "min": 3000,
      "max": 10000,
      "step": 500,
      "unit": "ms",
      "label": "Autoplay delay",
      "default": 5000,
      "info": "Time between slide transitions"
    },
    {
      "type": "checkbox",
      "id": "pause_on_hover",
      "label": "Pause on hover",
      "default": true,
      "info": "Pause autoplay when hovering over slider"
    }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        {
          "type": "image_picker",
          "id": "desktop_hero",
          "label": "Desktop Hero Image (≥1024px)",
          "info": "Recommended: 1920x1080px"
        },
        {
          "type": "image_picker",
          "id": "tablet_hero",
          "label": "Tablet Hero Image (768-1023px)",
          "info": "Recommended: 1024x768px"
        },
        {
          "type": "image_picker",
          "id": "mobile_hero",
          "label": "Mobile Hero Image (≤767px)",
          "info": "Recommended: 768x1024px"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Fallback Image",
          "info": "Used if responsive images are not set"
        },
        {
          "type": "text",
          "id": "subtitle",
          "label": "Subtitle",
          "default": "New Collection"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Discover Our Latest"
        },
        {
          "type": "textarea",
          "id": "text",
          "label": "Text",
          "default": "Explore our curated selection of premium products."
        },
        {
          "type": "text",
          "id": "button_label",
          "label": "Button Label",
          "default": "Shop Now"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button Link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Hero",
      "blocks": [
        {
          "type": "slide"
        }
      ]
    }
  ]
}
{% endschema %}

