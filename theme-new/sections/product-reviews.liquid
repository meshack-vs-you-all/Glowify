{%- comment -%}
  Product Reviews Section
  Displays customer reviews and ratings
{%- endcomment -%}

{%- if section.settings.show_reviews -%}
  <div class="product-reviews section" data-product-reviews>
    <div class="page-width">
      <h2 class="product-reviews__title">{{ section.settings.title | default: 'Customer Reviews' }}</h2>
      
      {%- if section.settings.show_rating_summary -%}
        <div class="product-reviews__summary">
          <div class="product-reviews__rating">
            <div class="product-reviews__stars" data-rating="{{ section.settings.average_rating | default: 4.5 }}">
              {%- for i in (1..5) -%}
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" 
                        fill="{% if i <= section.settings.average_rating %}#FCAF45{% else %}#E5E5E5{% endif %}"/>
                </svg>
              {%- endfor -%}
            </div>
            <span class="product-reviews__average">{{ section.settings.average_rating | default: 4.5 }}</span>
            <span class="product-reviews__count">({{ section.settings.review_count | default: 24 }} reviews)</span>
          </div>
        </div>
      {%- endif -%}

      <div class="product-reviews__list">
        {%- comment -%} Sample reviews - in production, these would come from a reviews app {%- endcomment -%}
        {%- for i in (1..3) -%}
          <div class="product-reviews__item">
            <div class="product-reviews__header">
              <div class="product-reviews__author">
                <strong>{{ 'products.reviews.customer' | t }} {{ i }}</strong>
                <div class="product-reviews__stars product-reviews__stars--small">
                  {%- for j in (1..5) -%}
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                      <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" 
                            fill="{% if j <= 5 %}#FCAF45{% else %}#E5E5E5{% endif %}"/>
                    </svg>
                  {%- endfor -%}
                </div>
              </div>
              <time class="product-reviews__date">{{ 'now' | date: '%B %d, %Y' }}</time>
            </div>
            <p class="product-reviews__text">
              {{ 'products.reviews.sample_text' | t | default: 'Great product! Highly recommend.' }}
            </p>
          </div>
        {%- endfor -%}
      </div>

      {%- if section.settings.show_write_review -%}
        <div class="product-reviews__write">
          <button class="button button--secondary" data-write-review>
            {{ 'products.reviews.write_review' | t | default: 'Write a Review' }}
          </button>
        </div>
      {%- endif -%}
    </div>
  </div>

  <style>
    .product-reviews {
      padding: var(--space-4xl) 0;
      background: var(--color-off-white);
    }

    .product-reviews__title {
      font-size: var(--font-size-h2-mobile);
      line-height: var(--line-height-h2-mobile);
      margin-bottom: var(--space-2xl);
      text-align: center;
    }

    @media (min-width: 768px) {
      .product-reviews__title {
        font-size: var(--font-size-h2-desktop);
        line-height: var(--line-height-h2-desktop);
      }
    }

    .product-reviews__summary {
      text-align: center;
      margin-bottom: var(--space-3xl);
    }

    .product-reviews__rating {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-md);
      flex-wrap: wrap;
    }

    .product-reviews__stars {
      display: flex;
      gap: var(--space-xs);
    }

    .product-reviews__stars--small {
      gap: 2px;
    }

    .product-reviews__average {
      font-size: var(--font-size-h3);
      font-weight: var(--font-weight-bold);
    }

    .product-reviews__count {
      color: var(--color-text-secondary);
    }

    .product-reviews__list {
      display: flex;
      flex-direction: column;
      gap: var(--space-xl);
      margin-bottom: var(--space-3xl);
    }

    .product-reviews__item {
      background: var(--color-white);
      padding: var(--space-xl);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-sm);
    }

    .product-reviews__header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: var(--space-md);
      flex-wrap: wrap;
      gap: var(--space-sm);
    }

    .product-reviews__author {
      display: flex;
      flex-direction: column;
      gap: var(--space-xs);
    }

    .product-reviews__date {
      color: var(--color-text-secondary);
      font-size: var(--font-size-small);
    }

    .product-reviews__text {
      line-height: var(--line-height-body-large);
      color: var(--color-text-primary);
    }

    .product-reviews__write {
      text-align: center;
    }
  </style>
{%- endif -%}

{% schema %}
{
  "name": "Product Reviews",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_reviews",
      "label": "Show reviews",
      "default": true
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Customer Reviews"
    },
    {
      "type": "checkbox",
      "id": "show_rating_summary",
      "label": "Show rating summary",
      "default": true
    },
    {
      "type": "range",
      "id": "average_rating",
      "min": 0,
      "max": 5,
      "step": 0.1,
      "label": "Average rating",
      "default": 4.5
    },
    {
      "type": "number",
      "id": "review_count",
      "label": "Review count",
      "default": 24
    },
    {
      "type": "checkbox",
      "id": "show_write_review",
      "label": "Show write review button",
      "default": true
    }
  ],
  "presets": [
    {
      "name": "Product Reviews"
    }
  ]
}
{% endschema %}

