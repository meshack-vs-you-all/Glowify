{% comment %}
  Toast Notification System
  Shows success/error messages for cart actions
{% endcomment %}

<div class="toast-container" id="toast-container" aria-live="polite" aria-atomic="true"></div>

<style>
  .toast-container {
    position: fixed;
    top: 100px;
    right: var(--space-md);
    z-index: 10001;
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
    pointer-events: none;
  }

  @media (max-width: 639px) {
    .toast-container {
      top: 80px;
      right: var(--space-sm);
      left: var(--space-sm);
    }
  }

  .toast {
    background: var(--color-white);
    border-radius: var(--radius-lg);
    padding: var(--space-lg) var(--space-xl);
    box-shadow: var(--shadow-xl);
    display: flex;
    align-items: center;
    gap: var(--space-md);
    min-width: 300px;
    max-width: 400px;
    pointer-events: auto;
    animation: slideInRight 0.3s var(--ease-out);
    border-left: 4px solid var(--color-success);
  }

  @media (max-width: 639px) {
    .toast {
      min-width: auto;
      max-width: 100%;
    }
  }

  .toast--error {
    border-left-color: var(--color-error);
  }

  .toast--info {
    border-left-color: var(--color-info);
  }

  .toast__icon {
    flex-shrink: 0;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .toast--success .toast__icon {
    color: var(--color-success);
  }

  .toast--error .toast__icon {
    color: var(--color-error);
  }

  .toast--info .toast__icon {
    color: var(--color-info);
  }

  .toast__content {
    flex: 1;
  }

  .toast__title {
    font-weight: var(--font-weight-semibold);
    font-size: var(--font-size-body);
    margin-bottom: var(--space-xs);
    color: var(--color-text-primary);
  }

  .toast__message {
    font-size: var(--font-size-small);
    color: var(--color-text-secondary);
    line-height: 1.4;
  }

  .toast__close {
    flex-shrink: 0;
    background: none;
    border: none;
    color: var(--color-text-secondary);
    cursor: pointer;
    padding: var(--space-xs);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: color var(--duration-fast) var(--ease-in-out);
  }

  .toast__close:hover {
    color: var(--color-text-primary);
  }

  @keyframes slideInRight {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes slideOutRight {
    from {
      transform: translateX(0);
      opacity: 1;
    }
    to {
      transform: translateX(100%);
      opacity: 0;
    }
  }

  .toast--removing {
    animation: slideOutRight 0.3s var(--ease-in) forwards;
  }
</style>

<script>
  (function() {
    const Toast = {
      container: null,
      
      init: function() {
        this.container = document.getElementById('toast-container');
        if (!this.container) {
          this.container = document.createElement('div');
          this.container.id = 'toast-container';
          this.container.className = 'toast-container';
          this.container.setAttribute('aria-live', 'polite');
          this.container.setAttribute('aria-atomic', 'true');
          document.body.appendChild(this.container);
        }
      },

      show: function(message, type = 'success', title = null) {
        if (!this.container) this.init();
        
        const toast = document.createElement('div');
        toast.className = `toast toast--${type}`;
        
        const iconSvg = type === 'success' 
          ? '<path d="M20 6L9 17l-5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>'
          : type === 'error'
          ? '<path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>'
          : '<circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><path d="M12 16v-4M12 8h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>';
        
        toast.innerHTML = `
          <div class="toast__icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              ${iconSvg}
            </svg>
          </div>
          <div class="toast__content">
            ${title ? `<div class="toast__title">${title}</div>` : ''}
            <div class="toast__message">${message}</div>
          </div>
          <button class="toast__close" aria-label="Close">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
        `;
        
        const closeBtn = toast.querySelector('.toast__close');
        const removeToast = () => {
          toast.classList.add('toast--removing');
          setTimeout(() => toast.remove(), 300);
        };
        
        closeBtn.addEventListener('click', removeToast);
        this.container.appendChild(toast);
        
        // Auto-remove after 5 seconds
        setTimeout(removeToast, 5000);
      }
    };
    
    // Make Toast available globally
    window.Toast = Toast;
    Toast.init();
  })();
</script>

